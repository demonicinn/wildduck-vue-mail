webpackJsonp([8],{324:function(t,e,n){function i(t){n(627)}var o=n(1)(n(517),n(676),i,null,null);t.exports=o.exports},359:function(t,e,n){"use strict";function i(t){return(0,l.default)({url:"/mail_contacts/list",method:"get",params:t})}function o(t){return c.Observable.create(function(t){setTimeout(t.next(),100)})}function r(t){return c.Observable.create(function(t){setTimeout(t.next(),100)})}function a(t){return c.Observable.create(function(t){setTimeout(t.next(),20)})}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchList=i,e.add=o,e.edit=r,e.del=a;var s=n(38),l=function(t){return t&&t.__esModule?t:{default:t}}(s),c=n(64)},517:function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(120),r=i(o),a=n(359),s=i(a);e.default={name:"group_manage",data:function(){return{listLoading:!0,total:0,listQuery:{page:1,limit:10},list:[],groupOperation:"",formVisible:!1,form:{name:"",contacts:[]},contacts:[],value:[],rightChecked:[],rules:{name:[{required:!0,message:"Please enter a group name",trigger:"blur"},{min:1,max:10,message:"Length Should be 1 to 10 characters",trigger:"blur"}]}}},beforeCreate:function(){var t=this;s.fetchList().then(function(e){t.contacts=e.data.contacts})},created:function(){this.initPage()},filters:{operationFilter:function(t){return{add:"Add group",edit:"Edit group"}[t]}},methods:{initPage:function(){this.getList()},getList:function(){var t=this;r.fetchList().then(function(e){t.list=e.data.groupList,t.total=e.data.total,t.listLoading=!1})},getContacts:function(){var t=this;s.fetchList().then(function(e){return t.contacts=e.data.contacts})},renderFunc:function(t,e){return t("span",{},e.name+"-"+e.mail)},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},initForm:function(){this.form={name:"",contacts:[]}},openForm:function(t,e){var n=this;this.groupOperation=t,this.formVisible=!0,"add"===t?this.initForm():(this.contacts.forEach(function(t){e.contacts.forEach(function(e){t.mail===e.mail&&n.value.push(e.mail)})}),this.form.name=e.name)},submit:function(){var t=this;this.$refs.form.validate(function(e){if(e){var n="add"===t.groupOperation?r.add:r.edit;t.form.contacts=t.value,n(t.form).subscribe({next:function(){t.$message({type:"success",message:"Success",duration:1e3}),setTimeout(function(){t.formVisible=!1,t.getList()},1e3)},error:function(){t.$message({type:"error",message:"operation failed"})}})}})},delGroup:function(t){var e=this;this.$confirm("Do you want to delete the group?","Confirm",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){r.del(t).subscribe({next:function(){e.$message("Deleted Successfully"),e.getList()},error:function(){e.$message("Failed to delete")}})})},goToGroup:function(t){this.$router.push({path:"/mail_contacts/index",query:{groupId:t}})},filterContacts:function(t,e){return e.name.indexOf(t)>-1||e.mail.indexOf(t)>-1}}}},544:function(t,e,n){e=t.exports=n(311)(!0),e.push([t.i,".transfer-footer{margin-left:20px;padding:6px 5px}.el-transfer-panel{min-width:320px}.group-container .el-dialog--small{width:60%}.group-container .el-transfer-panel__body{height:260px}","",{version:3,sources:["E:/node/vueJs/dAppBoxV3/src/views/mail_contacts/group.vue"],names:[],mappings:"AACA,iBACI,iBAAkB,AAClB,eAAiB,CACpB,AACD,mBACI,eAAiB,CACpB,AACD,mCACI,SAAW,CACd,AACD,0CACI,YAAc,CACjB",file:"group.vue",sourcesContent:["\n.transfer-footer {\r\n    margin-left: 20px;\r\n    padding: 6px 5px;\n}\n.el-transfer-panel {\r\n    min-width: 320px;\n}\n.group-container .el-dialog--small {\r\n    width: 60%;\n}\n.group-container .el-transfer-panel__body {\r\n    height: 260px;\n}\r\n"],sourceRoot:""}])},627:function(t,e,n){var i=n(544);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(312)("0f8d83c4",i,!0)},676:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container calendar-list-container group-container"},[n("div",{staticClass:"filter-container"},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){t.openForm("add")}}},[t._v("Add group")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],ref:"groupTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center","min-width":"200px",label:"Group name"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"primary",color:"#E3FDFD"},on:{click:function(n){t.goToGroup(e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"operating","min-width":"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"edit-group",attrs:{size:"small",type:"primary"},on:{click:function(n){t.openForm("edit",e.row)}}},[t._v("Edit\n                ")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){t.delGroup(e.row.id)}}},[t._v("Delete\n                ")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(n){t.goToGroup(e.row.id)}}},[t._v("View\n                ")])]}}])})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.listQuery.page=e}}})],1),t._v(" "),n("el-dialog",{attrs:{title:t._f("operationFilter")(t.groupOperation),visible:t.formVisible},on:{"update:visible":function(e){t.formVisible=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[n("el-form-item",{attrs:{label:"Group Name",prop:"name","label-width":"100px"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.form.name=e},expression:"form.name"}})],1),t._v(" "),n("el-transfer",{attrs:{filterable:"","filter-method":t.filterContacts,"left-default-checked":[2,3],"right-default-checked":t.rightChecked,props:{key:"mail",label:"name"},"render-content":t.renderFunc,titles:["Contact","Group contact"],"button-texts":["Cancel add","Add to this group"],"footer-format":{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:t.contacts},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("Cancel")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submit()}}},[t._v("Submit")])],1)],1)],1)},staticRenderFns:[]}}});